---

copyright:
  years: 2017
lastupdated: "2018-11-10"

keywords: faq, faqs, questions, gateway, vrouter, vyatta, 5400, 5600, password, traffic, firewall, provision, login, ha, high availability

subcollection: virtual-router-appliance

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}
{:download: .download}
{:faq: data-hd-content-type='faq'}
{:note: .note}
{:important: .important}

# IBM Virtual Router Appliance の FAQ
{: #faqs-for-ibm-virtual-router-appliance}

以下は、IBM© Virtual Router Appliance (VRA) を使用した作業でのよくある質問です。

## VRA とは何ですか?
{: faq}

Virtual Router Appliance (VRA) を使用すると、IBM Cloud のお客様は、ファイアウォール、トラフィック・シェーピング、ポリシーベースのルーティング、VPN、および他のフィーチャーのホストが設定されたフル装備のエンタープライズ・ルーターを介して、プライベートおよびパブリック・ ネットワーク・トラフィックを選択的に経路指定できます。 すべての VRA フィーチャーはお客様により管理されます。 VRA は、IBM Cloud のお客様に、オンプレミス・ネットワーク用に通常予約されている一定の制御を提供します。

## ゲートウェイ・アプライアンスとは何ですか
{: faq}

ゲートウェイ・アプライアンス・フィクスチャーを使用すると、Web ポータルまたは API を使用して、ネットワーク・セグメント (VLAN) を選択し、VRA を介した経路指定をすることができます。 VLAN の選択はいつでも変更できます。 また、ゲートウェイ・アプライアンスは VRA 高可用性 (HA) に対応しており、1 つ目の VRA に障害が発生した場合にもう 1 つの VRA が引き継ぐように構成します。

## 「Vyatta」や「vRouter」といった用語への参照を目にすることがありますが、 VRA にどのように関係しますか
{: faq}

Vyatta は、すべて取得されるオープン・ソースで PC ベースのルーター・ソフトウェアでしたが、クローズド・ソースに移行しました。 今日、「Vyatta」および「Vyatta OS」は、そのクローズド・ソース・プロジェクトから派生して改造された市販のソフトウェアです。 IBM VRA には、Vyatta OS の要素、および IBM Cloud を介して排他的に使用可能なフィーチャーとサービスの機能拡張が多く組み込まれています。

「vRouter」は、その後の所有者による短命の商標変更でした。 文書に見られるときは、Vyatta と同義であると考えることができます。

## Vyatta 5400 はまだサポートされていますか
{: faq}

IBM は、2019 年 3 月 31 日時点で Vyatta 5400 のサポートを終了します。

## Virtual Router Appliance(Vyatta 5600) が Vyatta 5400 を超える改良点は何ですか
{: #what-improvements-does-the-virtual-router-appliance-vyatta-5600-have-over-the-vyatta-5400-}

Vyatta 5600 では、Vyatta 5400 を超える以下の機能拡張があります。

- スループットの高速化 (CPU コア当たり最大 10 Gbps)
- IPsec VPN セッションあたり 3 倍以上のスループットの増加 (Advanced Encryption Standards)
- ルーター、フロー、および同時接続の容量の増加
- Layer 2 Tunneling Protocol Version 3 (L2TPv3)、Internet Key Exchange Version 2 (IKEv2)、Secure Hash Algorithm 2 (SHA-2)、802.1Q トンネリング (Q-in-Q) カプセル化など、標準サポートの更新

## AT&T vRouter 5600 のオファリングについてはどのようになっていますか
{: faq}

AT&T (以前は Brocade) は、Brocade vRouter 5600 オファリングの生産終了およびサポートの終了を発表しました。 Brocade vRouter 5600 は IBM Virtual Router Appliance の基本的な技術能力を提供しますが、この発表は IBM のお客様には該当しません。 IBM のお客様は、引き続きこの新しいオファリングを使用したサポートを得られます。

## VRA はどのように配信されますか
{: faq}

VRA はネットワーク・ゲートウェイを注文することによって取得します。 この合理化されたプロセスにより、データ・センターと適切な VRA サーバーを選択できるだけでなく、VRA の HA ペアをデプロイするかどうかを選択できます。 サーバー、オペレーティング・システム、ゲートウェイ・アプライアンス・フィクスチャーはすべて自動的にプロビジョンされます。 プロビジョニングが完了すると、ゲートウェイ・アプライアンスのインターフェースを使用して、VRA を介した VLAN の経路指定ができます。 カスタマー・ポータルのハードウェアの詳細セクションに記載されているパスワードを設定して SSH (セキュア・シェル) を使用することにより、VRA サーバーを直接構成することができます。

## パスワードは安全ですか
{: faq}

はい。 すべての VRA には、アカウント所有者にのみ表示されるランダム・パスワードが割り当てられます。 SSH 公開鍵および管理 IP アクセス制限と同様に、パスワードは簡単に変更できます。

## ゲートウェイ・アプライアンスなしで VRA を取得できますか
{: faq}

はい。ですがその場合、VRA のパブリック・インターフェースとプライベート・インターフェース間のトラフィックのみを管理できます。 VLAN と HA にはゲートウェイ・アプライアンス・フィクスチャーが必要です。

## すべてのネットワーク・トラフィックが VRA を介して送信されますか
{: faq}

いいえ。ゲートウェイ・アプライアンスでは、VRA を通過して経路指定されるプライベートおよびパブリックのネットワーク・セグメント (VLAN) を選択できます。 VLAN の選択はいつでも変更およびバイパスすることができます。 また、VRA によって、サブネットまたは IP 範囲に適用される IP ベースのルールを定義することもできます。 そのようなルールは、それらのサブネットを含む  VLAN が VRA を通過して経路指定される場合にのみ機能します。

## VRA または専用のファイアウォールは新規サーバーのプロビジョンを回避できますか
{: faq}

はい。 可能な場合は常に、使用する予定のサーバーが設定されるまでは、ネットワークをロックダウンしてはいけません。

IBM サポートは、お客様の明示的な関与なしに VRA または専用のファイアウォール構成を検査または変更することがポリシーによって禁止されています。そのため、ほとんどの場合、IBM サポートは、停止または失敗したサーバーのプロビジョンに対する責任が VRA であることを認識できません。

サーバーを注文する前に、自動サーバー・プロビジョンを許可するように VRA またはファイアウォールが構成されていることを確認するのは、お客様の責任です。 お客様が管理する VRA またはファイアウォールによってブロックされているプロビジョンは、お客様の責任で解決することができます。 このようなプロビジョニングの遅延は、SLA またはクレジットの影響を受けません。 注文されたシステムは、お客様が即時に対応しない場合、(お客様のデータが消去された後) 在庫に戻される可能性があります。

同様に、注文後に VRA/ファイアウォールがバイパスされる場合でも、注文が失敗する可能性があります。 自動再試行が実行される期間は、短い時間帯である可能性があります。 プロビジョン・プロセス全体がネットワークの干渉なく処理されるのが最善です。

## IBM からどのようなファイアウォール製品が提供されていますか
{: faq}

[このトピック](/docs/infrastructure/fortigate-10g?topic=fortigate-10g-exploring-firewalls)で、IBM Cloud で提供されるすべてのファイアウォール製品の詳細な比較を参照できます。

## VRA はお客様サポートの作業を複雑にする可能性がありますか
{: faq}

はい。上述した理由によります。 VRA は「ブラック・ボックス」です。VLAN で入ると VLAN で出てくるので、IBM には、お客様がその間パケットで何を操作しているかわかりません。

IBM サポートは常に最善を尽くしますが、VRA と専用のファイアウォールでは、: a) お客様のプライバシーは接続性に勝ります。b) 標準サポート・スタッフは、構成が不十分または非常に複雑な VRA/ファイアウォール構成を分析する態勢が整っていません。

最初の診断手順として、お客様に VRA またはファイアウォール VLAN をバイパスするよう要求する可能性があります。 この状態で、失敗したプロビジョンが開始される場合、問題がご使用の VRA/ファイアウォール構成にあると想定する必要があります

## VRA は、ネットワーク・パフォーマンスにどのような影響を与えますか
{: faq}

他のお客様によってお客様が認識されないとしても、パブリック・クラウドではネットワークを共有することにご注意ください。 真に最高条件の VRA スループットは、ある時点の使用可能なネットワーク容量と、データが移動する必要がある距離によって決まります。

これらの変数は別にして、スループット 10 Gbps ごとに 1 フル・プロセッサー・コア (ハイパースレッドを含まない) を必要とする概算を使用すると、VRA は複数のインターフェースにわたって 80 Gbps の未処理のトラフィックを転送することができます。 現行の複数のサーバーが 40 Gbps (2 x 10 Gbps パブリック + 2 x 10 Gbps プライベート) で限界に達すると仮定すると、8 個以上のコアを持つ 1 つのサーバーであれば、複数の共通 VRA フィーチャーを最高に近い状態のネットワーク・パフォーマンスで処理するのに十分な計算ヘッドルームがあるはずです。

## VRA パスワードをなくした場合はどうすればいいですか
{: faq}

システムにアクセスできる場合は、次のコマンドを実行して新規パスワードを設定します。

```
set system login user [account] authentication plaintext-password [password]  
```

システムにアクセスできない場合は、デバイスをリブートして、root ユーザー・パスワードをリセットするために GRUB メニューでパスワードのリカバリー・オプションを使用することができます。

## ファイアウォールからロックアウトされた場合、どうすればいいですか
{: faq}

潜在的に危険なファイアウォールのルールをテストする際に、`reboot at [time]` 構造が便利な場合があります。

ルールが機能する場合は、`reboot cancel` コマンドを使用してリブートをキャンセルします。 ルールがアクセスをロックアウトする場合は、スケジュールされたリブートが発生するまで待つだけです。

システムにアクセスできない場合は、リブートを使用してアクセスをリカバリーできる可能性があります。 リブートの際に、システムは、破棄された前回のエントリーにより変更されていない構成ファイルを読み取ります。

IPMI を使用してアクセスできる場合は、以下のアクションを実行してアクセスをリカバリーすることができます。

1. 以下を実行して、問題のルールを無効化します。

	```
	set security firewall name [firewall name] rule [rule number] disable
	commit
	```

2. 以下を実行して、指定されたルール・セット全体を必要なインターフェースから除外します。

	```
	delete interfaces dataplane [interface] firewall [type][firewall name]
	commit
	```

**注:** これらのコマンドを正しく使用しないと、インターフェース構成が消去される可能性があります。

## 高可用性 (HA) ペアで 2 つの Vyatta デバイスを実行することが望ましいのはなぜですか
{: faq}

ほとんどのクラウド・カスタマーは、高可用性 (HA) サービスを求めています。これは、ワークロードが 2 つ (またはそれ以上) の完全に分離された (ハードウェア) マシン上にホストされているか、より理想的には、2 つの別個のアベイラビリティー・ゾーン (データ・センターを思い浮かべてください) でホストされていて、一方に障害が発生した場合に、他方でサービスを続行できるようにするためです。一方のマシンで障害が発生すると、もう一方のマシンへの「フェイルオーバー」が行われます。つまり、サービスを実行し続けることができます。これは「HA」サービスと呼ばれるもので、ほぼ常時利用可能な状態を作り出します。

## VRA への root ログインはどのように有効にすることができますか
{: faq}

SSH 経由で root アクセスを有効にするには、以下のコマンドを実行します。

`set service ssh allow-root`

SSH を使用した root アクセスを許可することは安全でないと見なされることに注意してください。 root シェルにアクセスする代わりに、別のユーザーとしてログインし、`su -` を使用してローカルで root に昇格するか、「スーパーユーザー」への sudo コマンドを許可することもできます。

例えば、vyatta をスーパーユーザーとして構成するには、以下のようにします。

`set system login vyatta level superuser`
